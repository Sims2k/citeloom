# Sample configuration for CiteLoom
[project."citeloom/clean-arch"]
collection = "proj-citeloom-clean-arch"
references_json = "references/clean-arch.json"
embedding_model = "fastembed/all-MiniLM-L6-v2"
hybrid_enabled = true

[chunking]
max_tokens = 450
overlap_tokens = 60
heading_context = 2
tokenizer = "minilm"

[docling]
# Timeout limits for document conversion (CPU-only processing may take longer)
# For very large documents (>30MB), consider increasing to 900-1200s (15-20 minutes)
document_timeout_seconds = 600  # 10 minutes (default for most documents)
page_timeout_seconds = 15       # Increased per-page timeout for complex pages

# CPU acceleration: Number of threads to use (None = auto-detect, use all available cores)
# For CPU-only processing, using all cores can significantly speed up conversion
# cpu_threads = null  # null = auto-detect (recommended for CPU-only) - commented out as TOML doesn't support null

# GPU acceleration: Enable if you have a CUDA-capable GPU (requires CUDA setup)
enable_gpu = false

# CPU optimization settings (based on https://github.com/Sims2k/pdf_data_pipeline)
use_fast_table_mode = true        # Use FAST mode for table extraction (faster on CPU)
enable_remote_services = false    # Disable remote services for security and speed
# artifacts_path = null             # Custom path for model cache (null = use default ~/.cache/docling/models) - commented out as TOML doesn't support null

# Feature toggles (disable expensive features for faster CPU processing)
do_table_structure = true         # Enable table structure extraction (essential)
do_ocr = true                     # Enable OCR for scanned documents (auto-detected if needed)
do_code_enrichment = false        # Disable code enrichment (faster processing)
do_formula_enrichment = false     # Disable formula enrichment (faster processing)
do_picture_classification = false # Disable picture classification (faster processing)
do_picture_description = false   # Disable picture description (faster processing)
generate_page_images = false      # Disable page image generation (faster processing)

# Windowed conversion: Process large documents in page windows to avoid timeouts
# This enables processing very large documents (>1000 pages) without timeouts
enable_windowed_conversion = true   # Enable windowed conversion for documents >1000 pages
force_windowed_conversion = false   # Force windowed conversion regardless of page count (manual override)
window_size = 10                      # Pages per window (10-30 recommended for CPU-only)
checkpoint_enabled = true             # Enable checkpoint/resume support

[qdrant]
url = "http://localhost:6333"
api_key = ""
timeout_ms = 15000
create_fulltext_index = true

[paths]
raw_dir = "assets/raw"
audit_dir = "var/audit"

[zotero]
# Source selection strategy: "local-first", "web-first", "auto", "local-only", "web-only"
# Default: "web-first" (backward compatible, migrates to "auto" after rollout)
mode = "local-first"

# Optional: Override Zotero database path (auto-detected if not specified)
# db_path = "C:/Users/YourName/AppData/Roaming/Zotero/Profiles/xxxxx.default/zotero/zotero.sqlite"
db_path = "C:/Users/Simon/Zotero/zotero.sqlite"

# Optional: Override Zotero storage directory (auto-detected if not specified)
# storage_dir = "C:/Users/YourName/AppData/Roaming/Zotero/Profiles/xxxxx.default/zotero/storage"
storage_dir = "C:/Users/Simon/Zotero/storage"

# Whether to index PDF annotations (highlights, comments) as separate vector points
# Default: false (opt-in to avoid storage bloat)
include_annotations = false

# Whether to prefer Zotero fulltext when available (50-80% speedup)
# Default: true (enabled for performance benefits)
prefer_zotero_fulltext = true

[zotero.web]
# Zotero Web API credentials (required for remote access)
# Can also be set via environment variables: ZOTERO_LIBRARY_ID, ZOTERO_API_KEY
# Environment variables take precedence over TOML values
library_id = "17690499"
api_key = "uy9m8H4KHlTH6DZFLvMlF6lx"

[zotero.fulltext]
# Minimum text length for quality validation (default: 100 characters)
min_length = 100